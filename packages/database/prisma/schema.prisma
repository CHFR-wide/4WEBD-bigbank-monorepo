datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x", "linux-musl-arm64-openssl-3.0.x"]
}

model User {
  id          Int      @id @default(autoincrement())
  firstName   String   @map("first_name")
  lastName    String   @map("last_name")
  email       String   @unique()
  phoneNumber String   @unique() @map("phone_number")
  password    String
  createdAt   DateTime @default(now()) @map("created_at")

  bankAccounts BankAccount[]

  @@map("user")
}

model BankAccount {
  id      Int     @id @default(autoincrement())
  label   String
  user    User    @relation(fields: [userId], references: [id])
  userId  Int
  balance Decimal

  transfersFrom Transfer[] @relation("transferFromAccount")
  transfersTo   Transfer[] @relation("transferToAccount")

  @@map("bank_account")
}

model Transfer {
  id            Int         @id @default(autoincrement())
  amount        Decimal
  fromAccount   BankAccount @relation("transferFromAccount", fields: [fromAccountId], references: [id])
  fromAccountId Int         @map("from_account_id")
  toAccount     BankAccount @relation("transferToAccount", fields: [toAccountId], references: [id])
  toAccountId   Int         @map("to_account_id")
}
